<div class="background">
    <div id="main_container" class="main_container">
        <div class="header">
            Results
            <div class="close" (click)="closeResultsPage()">
                X
            </div>
        </div>
        <div class="runs">
            <div class = "noResult" *ngIf="noResults==true">
                This project has not been executed. Click on Run Pipeline to execute your pipeline and see results.
            </div>
            <div class = "results" *ngIf="noResults==false">
            <div class="body" *ngFor="let result of results; let i = index;" (click)="expanded=i;checkForCSV(result);">
                <div class="run_row">
                    <div class="title">
                        Result {{i+1}}
                    </div>
                    <div class="status">
                        {{result.run_status}}
                    </div>
                    <div class="expand_icon"></div>
                    <div class="schedule_time">
                        {{result.scheduled_time?(result.scheduled_time.$date|date:'MMM d, y, h:mm:ss a'):"Execution Time"}}
                    </div>
                    <div class="run_result_body" *ngIf="expanded==i">
                        <div class = "result_header">
                            <span class = "title">Result format</span>
                            <span class = "result_format">{{result.result.result_format}}</span>
                        </div>
                        <div class = "table_container" *ngIf = "result.result.result_format == 'csv'">
                            <table class="table">
                                <thead>
                                  <tr>
                                    <th *ngFor="let header of csv_header">{{ header }}</th>
                                  </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let row of csv_data">
                                        <td *ngFor="let header of csv_header">
                                          {{ row[header] }}
                                        </td>
                                      </tr>
                                </tbody>
                              </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
</div>